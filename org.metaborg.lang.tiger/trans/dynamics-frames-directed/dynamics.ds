module dynamics-frames-directed/dynamics

imports statics/tiger
imports ds-signatures/Tiger-sig
imports dynamics-frames-directed/natives
imports dynamics-frames-directed/base
imports dynamics-frames-directed/bindings
imports dynamics-frames-directed/variables
imports dynamics-frames-directed/functions
imports dynamics-frames-directed/numbers
imports dynamics-frames-directed/strings 
imports dynamics-frames-directed/records
imports dynamics-frames-directed/arrays
imports dynamics-frames-directed/control-flow
imports dynamics-frames-directed/types
imports dynamics-frames-directed/predef
imports dynamics-frames-directed/equality

imports dynamics-frames-directed/nabl2/nabl2-link
  
signature
  arrows
    Module -init-> V
    Module --> V
    
rules

  mod@Mod(_) -init-> vv
  where
    initNaBL2(mod) --> NaBL2;
    initHeap(mod) --> H;
    T nabl2_topIndexOf(mod), NaBL2 |- mod :: H, _Exc OK() --> vv

  mod@Mod(e) --> vv
  where
    mod -paramsOf-> scope;
    initDefault(scope, {}) --> F;
    F |- stdLib() --> _;
    F |- e --> vv

